<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>hohl.rocks â€” Wolf Hohl Â· KI-Manager</title>
  <link rel="icon" href="/favicon.ico" />
  <style>
    html,body{height:100%;margin:0;background:#0a1118;color:#eaf2ff;font:500 16px/1.45 ui-sans-serif,system-ui}
    .stage{position:fixed;inset:0;overflow:hidden}
    #bg-video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(1) contrast(1.05)}
    /* layer for shapes (if your hero-shapes.js uses one) */
    #shape-layer{position:absolute;inset:0;pointer-events:auto}
    /* chat dock (very lightweight â€“ your CSS can override) */
    .chat-dock{position:fixed;right:22px;bottom:22px;z-index:40;background:rgba(12,16,22,.72);
      border:1px solid rgba(255,255,255,.14);backdrop-filter:blur(10px);padding:10px;border-radius:18px;display:flex;gap:8px;align-items:center}
    .chat-dock input{width:min(48vw,360px);max-width:68vw;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.16);
      color:#eaf2ff;border-radius:999px;padding:10px 14px;outline:none}
    .chat-dock button{background:#1b66ff;border:0;color:#fff;border-radius:999px;padding:9px 12px;cursor:pointer}
    .chat-dock .ghost{background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.18);color:#eaf2ff}
    /* output panel (optional; ChatDock erzeugt es automatisch, falls nicht vorhanden) */
    #chat-output{position:fixed;right:22px;bottom:92px;width:min(640px,88vw);max-height:min(58vh,460px);overflow:auto;
      background:rgba(12,16,22,.62);border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(10px);border-radius:18px;padding:12px;display:none;z-index:42}
    #chat-output.show{display:block}
    .bubble-row{margin:8px 0;display:flex}
    .bubble-row.user .b-inner{margin-left:auto;background:rgba(255,255,255,.08)}
    .bubble-row.assistant .b-inner{margin-right:auto;background:rgba(27,102,255,.13)}
    .b-inner{padding:10px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.16)}
    /* Datenschutz-Button Platzhalter unten links (falls vorhanden) */
    .privacy-slot{position:fixed;left:14px;bottom:14px;z-index:34}
  </style>

<style>.ticker{height:48px}@media(max-width:880px){.ticker{height:42px}}</style>
</head>
<body>
  <main class="stage" aria-label="Highway-Video mit organischen Neon-Shapes">
    <video id="bg-video" autoplay playsinline loop muted>
      <source src="/videos/desert_drive.mp4" type="video/mp4" />
    </video>
    <div id="shape-layer"></div>
  </main>

  <!-- Chat Dock -->
  <div id="chat-output" aria-live="polite"></div>
  <div class="chat-dock">
    <input id="chat-input" type="text" placeholder="Frage stellenâ€¦ (KI, EU)"/>
    <button id="photo-btn" class="ghost" title="Foto nutzen">Foto</button>
    <button id="chat-send">Senden</button>
  </div>

  <div class="privacy-slot" id="privacy-slot"></div>

  <script>
    // Konfiguration: Railway-Backend & Systemprompt
    window.HOHLROCKS_CHAT_BASE = 'https://hohlrocks-production.up.railway.app';
    window.WOLF_SYSTEM_PROMPT = [
      "Du antwortest im Namen von Wolf Hohl â€“ TÃœVâ€‘zertifizierter KIâ€‘Manager.",
      "Ton: seriÃ¶s, prÃ¤gnant, deutsch, winterâ€‘klar, freundlich.",
      "Erstantwort maximal 3 SÃ¤tze. Wo sinnvoll: 1 kurzes Beispiel, 1 pragmatischer nÃ¤chster Schritt.",
      "Beziehe dich â€“ wenn passend â€“ auf Wolfs Erfahrung (30 Jahre Marketing/Kommunikation, Trailer, >50 Mio Umsatz) und Rolle als KIâ€‘Manager.",
      "Keine Buzzwordâ€‘Orgel. Falls unsicher: kurz Risiko/Tradeâ€‘off erwÃ¤hnen."
    ].join(" ");
  </script>

  <!-- Deine bestehenden Skripte fÃ¼r Shapes etc. -->
  <link rel="stylesheet" href="/hero-shapes.css?v=sp2">
  <script src="/hero-shapes.js?v=sp2"></script>

  <!-- Analytics (lokal) -->
  <script src="/analytics-lite.js?v=1"></script>

  <!-- Ticker (Inhalte â†’ Laufband) -->
  <script src="/ticker-items.js?v=gc3"></script>
  <script src="/ticker.js?v=send6"></script>

  <!-- Chat-Client (SSE + Backoff) -->
  <script src="/js/chatbox-stream.js?v=chat4"></script>
  <script>
    // ChatDock initialisieren
    document.addEventListener('DOMContentLoaded', function(){
      if (window.ChatDock && ChatDock.initChatDock){
        ChatDock.initChatDock({
          inputSel:'#chat-input',
          buttonSel:'#chat-send',
          systemPrompt: window.WOLF_SYSTEM_PROMPT,
          model: 'gpt-4o-mini'
        });
      }
    });
  </script>
  <script src="/variety-engine.js?v=1"></script>

  <!-- Spotlight + Micro-Demos + Foto-Flows + Style-Switcher -->
  <script src="/spotlight-card.js?v=1"></script>
  <script src="/micro-demos.js?v=1"></script>
  <script src="/photo-flows.js?v=1"></script>
  <script src="/style-switcher.js?v=1"></script>

  <!-- Motorsound (Harley) -->
  <script src="/js/harley-lite.js?v=3"></script>
  <script src="/harley-lite-autostart.js?v=1"></script>
  <script>
    // Sound erst nach User-Geste starten, dann weich absenken
    window.addEventListener('pointerdown', function once(){
      try{ HarleyLite.startAmbient(900); }catch(e){}
      window.removeEventListener('pointerdown', once, { capture:false });
    }, { capture:false, once:true });
  </script>
<!-- 1) Fallback-Inhalte fÃ¼r den Ticker (falls __TICKER_ITEMS nicht geladen wurde) -->
<script>
window.__TICKER_ITEMS = window.__TICKER_ITEMS || [
  { label: "Ãœberrasch mich ðŸ¤¯", prompt: "Zeig mir etwas Unerwartetes, das KI heute schon gut kann â€“ in 3 SÃ¤tzen, mit einem kleinen Beispiel.", preview: "Kleine Demo, groÃŸe Wirkung." },
  { label: "Mini-Story (5 WÃ¶rter)", prompt: "Erzeuge eine spannende Mini-Story mit genau 5 WÃ¶rtern. Danach ein kurzer Titel. Ton: smart, knapp, Ã¼berraschend.", preview: "FÃ¼nf WÃ¶rter, ein Plot." },
  { label: "Haiku zur Fahrt", prompt: "Schreibe ein kurzes Haiku Ã¼ber eine nÃ¤chtliche Highway-Fahrt, Winterluft, Fernlicht, Weite. Ton: ruhig, prÃ¤zise.", preview: "Drei Zeilen Highway-Luft." },
  { label: "ErklÃ¤râ€™s mir einfach", prompt: "ErklÃ¤re mir ein aktuelles KI-Thema zuerst extrem einfach (2â€“3 SÃ¤tze), dann normal, dann nerdy (je 2 SÃ¤tze).", preview: "einfach â†’ normal â†’ nerdy" },
  { label: "Kleinstes Experiment (24h)", prompt: "Entwirf mir ein 24-Stunden-KI-Pilotexperiment mit Hypothese, Setup, Erfolgskriterium, Aufwand < 2h. Bulletpoints, konkret.", preview: "Heute anfangen â€“ ohne Drama." }
];
</script>

<!-- 2) Ticker-Force: rendert den Ticker immer, pausiert bei Klick, sendet direkt an GPT -->
<script>
(function(){
  'use strict';
  if (document.querySelector('.ticker-wrap')) return; // schon vorhanden

  var css = document.createElement('style');
  css.textContent =
  '.ticker-wrap{position:fixed;left:24px;right:24px;z-index:45;pointer-events:auto}'+
  '.ticker{position:relative;overflow:hidden;'+
  '-webkit-mask-image:linear-gradient(90deg,transparent 0,black 8%,black 92%,transparent 100%);'+
  'mask-image:linear-gradient(90deg,transparent 0,black 8%,black 92%,transparent 100%)}'+
  '.ticker-track{position:absolute;display:inline-flex;gap:14px;white-space:nowrap;will-change:transform;animation:ticker-move var(--dur,40s) linear infinite}'+
  '.ticker-track.paused{animation-play-state:paused}'+
  '.ticker a{display:inline-block;padding:10px 16px;border-radius:999px;text-decoration:none;color:#eaf2ff;background:rgba(20,28,36,.64);border:1px solid rgba(255,255,255,.16);backdrop-filter:blur(6px)}'+
  '.ticker a:hover{filter:brightness(1.08)}'+
  '@keyframes ticker-move{from{transform:translateX(100%)}to{transform:translateX(-110%)}}'+
  '@media (max-width:880px){.ticker-wrap{left:12px;right:12px}.ticker a{padding:8px 12px}}';
  document.head.appendChild(css);

  var wrap = document.createElement('div'); wrap.className='ticker-wrap';
  var inner = document.createElement('div'); inner.className='ticker';
  var track = document.createElement('div'); track.className='ticker-track';
  inner.appendChild(track); wrap.appendChild(inner); document.body.appendChild(wrap);

  var items = (Array.isArray(window.__TICKER_ITEMS) && window.__TICKER_ITEMS.length) ? window.__TICKER_ITEMS : [];
  function addChip(label, prompt, preview){
    var a = document.createElement('a'); a.href='#'; a.textContent = label; if(preview) a.title = preview;
    a.addEventListener('click', function(ev){
      ev.preventDefault();
      track.classList.add('paused');
      // Analytics (optional, failsafe)
      try{ window.AnalyticsLite && AnalyticsLite.emit && AnalyticsLite.emit('ticker_click', { label: label }); }catch(_){}
      // Direkt an GPT senden
      try{
        if (window.ChatDock && typeof ChatDock.send==='function'){ ChatDock.send(prompt); return; }
      }catch(_){}
      // Fallback: in Input schreiben + Enter auslÃ¶sen
      var input = document.querySelector('#chat-input'), btn = document.querySelector('#chat-send');
      if (input){ input.focus(); input.value = prompt;
        var kd = new KeyboardEvent('keydown',{key:'Enter',code:'Enter',which:13,keyCode:13,bubbles:true});
        input.dispatchEvent(kd); return; }
      if (btn) btn.click();
    });
    track.appendChild(a);
  }
  items.forEach(function(it){ addChip(it.label, it.prompt, it.preview); });
  items.forEach(function(it){ addChip(it.label, it.prompt, it.preview); }); // fÃ¼r Endlosschleife doppeln

  function updateBottom(){
    var chat = document.querySelector('.chat-dock'); var bottom = 104;
    if (chat){ try{ bottom = (window.innerHeight - chat.getBoundingClientRect().top) + 20; }catch(e){} }
    wrap.style.bottom = Math.max(76, bottom) + 'px';
  }
  function autoDuration(){
    var w = track.scrollWidth, vw = Math.max(320, window.innerWidth);
    var screens = Math.max(1, w / vw);
    var dur = Math.max(26, Math.min(60, screens * 34));
    track.style.setProperty('--dur', dur.toFixed(1)+'s');
  }
  // Reagieren auf Chat-Events
  window.addEventListener('chat:send', function(){ track.classList.add('paused'); });
  window.addEventListener('chat:done', function(){ track.classList.remove('paused'); });

  updateBottom(); autoDuration();
  window.addEventListener('resize', function(){ updateBottom(); autoDuration(); }, {passive:true});
})();
</script>

<!-- 3) Harley-Autostart: startet sicher nach erster Geste (und bei chat:send) -->
<script>
(function(){
  'use strict';
  let started=false;
  function go(){
    if(started) return;
    started=true;
    try{ HarleyLite && HarleyLite.startAmbient && HarleyLite.startAmbient(900); }catch(_){}
  }
  ['pointerdown','touchstart','keydown','click'].forEach(evt=>{
    window.addEventListener(evt, go, { passive:true });
  });
  window.addEventListener('chat:send', go);
})();
</script>

<!-- 4) (Optional) Favicon als Data-URI, um 404 zu vermeiden -->
<link rel="icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="/>
<!-- Ticker (seamless + langsam) -->
<script>
(function(){
  'use strict';
  if (document.querySelector('.ticker-wrap')) return; // schon vorhanden

  // --- Inhalte: nimm diese oder deine __TICKER_ITEMS ---
  window.__TICKER_ITEMS = Array.isArray(window.__TICKER_ITEMS) && window.__TICKER_ITEMS.length ? window.__TICKER_ITEMS : [
    { label:"Ãœberrasch mich ðŸ¤¯", prompt:"Zeig mir etwas Unerwartetes, das KI heute schon gut kann â€“ in 3 SÃ¤tzen, mit kleinem Beispiel.", preview:"Kleine Demo, groÃŸe Wirkung." },
    { label:"Mini-Story (5 WÃ¶rter)", prompt:"Erzeuge eine spannende Mini-Story mit genau 5 WÃ¶rtern. Danach ein kurzer Titel. Ton: smart, knapp, Ã¼berraschend.", preview:"FÃ¼nf WÃ¶rter, ein Plot." },
    { label:"Haiku zur Fahrt", prompt:"Schreibe ein kurzes Haiku Ã¼ber eine nÃ¤chtliche Highway-Fahrt, Winterluft, Fernlicht, Weite. Ton: ruhig, prÃ¤zise.", preview:"Drei Zeilen Highway-Luft." },
    { label:"Kleinstes Experiment (24h)", prompt:"Entwirf ein 24-Stunden-KI-Pilotexperiment mit Hypothese, Setup, Erfolgskriterium, Aufwand < 2h. Bulletpoints, konkret.", preview:"Heute anfangen â€“ ohne Drama." },
    { label:"Prompt-Trick des Tages", prompt:"Gib mir einen Prompt-Trick mit Mini-Beispiel. Max 4 SÃ¤tze.", preview:"Sofort besser prompten." },
    { label:"KI-Mythos: Halluziniert?", prompt:"EntkrÃ¤fte 'KI halluziniert immer' in 3 SÃ¤tzen. Nenne 2 GegenmaÃŸnahmen.", preview:"Mythos freundlich entkrÃ¤ften." },
    { label:"Brand-Farben aus Foto", prompt:"Wenn ich ein Bild hochlade: 5 Hex-Farben, je 1 UI-Einsatz + 1 Kontrast-Hinweis.", preview:"Palette aus deinem Bild." },
    { label:"Workday in 60 Min", prompt:"Plane 60 Minuten KI-Sprint (5 Personen): Agenda, Tools, Output, NÃ¤chster Schritt.", preview:"Klein, aber wirksam." },
    { label:"Visuelle Metaphern", prompt:"5 Bild-Metaphern fÃ¼r KI-EinfÃ¼hrung ohne Klischees; je 1 Satz BegrÃ¼ndung.", preview:"Jenseits der Roboterhand." },
    { label:"Ãœberrasch mich #2", prompt:"Zeig eine kleine KI-Idee, die heute praktisch hilft â€“ 3 SÃ¤tze + 1 nÃ¤chster Schritt.", preview:"Noch ein Aha." }
  ];

  // --- Stil & Layout ---
  const css = `
    .ticker-wrap{position:fixed;left:24px;right:24px;z-index:45;pointer-events:auto}
    .ticker{position:relative;overflow:hidden;height:48px;
      -webkit-mask-image:linear-gradient(90deg,transparent 0,black 8%,black 92%,transparent 100%);
              mask-image:linear-gradient(90deg,transparent 0,black 8%,black 92%,transparent 100%)}
    .ticker-track{position:absolute;display:inline-flex;gap:14px;white-space:nowrap;will-change:transform;
      animation:ticker-move var(--dur,60s) linear infinite}
    .ticker-track.paused{animation-play-state:paused}
    .ticker a{display:inline-block;padding:10px 16px;border-radius:999px;text-decoration:none;
      color:#eaf2ff;background:rgba(20,28,36,.64);border:1px solid rgba(255,255,255,.16);backdrop-filter:blur(6px)}
    .ticker a:hover{filter:brightness(1.08)}
    @keyframes ticker-move{from{transform:translateX(100%)}to{transform:translateX(-110%)}}
    @media (max-width:880px){.ticker-wrap{left:12px;right:12px}.ticker{height:42px}.ticker a{padding:8px 12px}}
  `;
  const style=document.createElement('style'); style.textContent=css; document.head.appendChild(style);

  // --- DOM erstellen ---
  const wrap=document.createElement('div'); wrap.className='ticker-wrap';
  const inner=document.createElement('div'); inner.className='ticker';
  const track=document.createElement('div'); track.className='ticker-track';
  inner.appendChild(track); wrap.appendChild(inner); document.body.appendChild(wrap);

  // --- Helpers ---
  function updateBottom(){
    const chat = document.querySelector('.chat-dock'); let bottom = 104;
    if(chat){ try{ bottom = (window.innerHeight - chat.getBoundingClientRect().top) + 20; }catch(_){ }
    }
    wrap.style.bottom = Math.max(76, bottom) + 'px';
  }
  function addChip(dst, label, prompt, preview){
    const a=document.createElement('a'); a.href='#'; a.textContent=label; if(preview) a.title=preview;
    a.addEventListener('click', (ev)=>{ ev.preventDefault();
      track.classList.add('paused');
      try{ window.AnalyticsLite?.emit?.('ticker_click',{label}); }catch(_){}
      try{ if(window.ChatDock?.send){ ChatDock.send(prompt); return; } }catch(_){}
      const input=document.querySelector('#chat-input'); const btn=document.querySelector('#chat-send');
      if(input){ input.value=prompt; input.dispatchEvent(new KeyboardEvent('keydown',{key:'Enter',code:'Enter',which:13,keyCode:13,bubbles:true})); return; }
      btn?.click();
    });
    dst.appendChild(a);
  }

  // --- Grundmenge bauen + Klone bis â‰¥ 3 Ã— Viewport ---
  const base = window.__TICKER_ITEMS.slice();
  base.forEach(it=>addChip(track, it.label, it.prompt, it.preview));
  function topUp(){
    const vw = Math.max(320, window.innerWidth);
    let guard = 16; // Sicherheit, kein endloses Klonen
    while (track.scrollWidth < 3*vw && guard-- > 0){
      base.forEach(it=>addChip(track, it.label, it.prompt, it.preview));
    }
  }
  topUp();

  // --- Langsamer machen: px/s verringern (hier anpassen) ---
  const SPEED_PX_S = 34; // vorher ~60, jetzt deutlich ruhiger
  function setDuration(){
    const vw = Math.max(320, window.innerWidth);
    const px = track.scrollWidth + vw;
    const dur = Math.max(28, Math.min(160, px / SPEED_PX_S));
    track.style.setProperty('--dur', dur.toFixed(1)+'s');
  }

  // --- Events ---
  updateBottom(); setDuration();
  window.addEventListener('resize', ()=>{ updateBottom(); topUp(); setDuration(); }, {passive:true});
  window.addEventListener('chat:send', ()=> track.classList.add('paused'));
  window.addEventListener('chat:done', ()=> track.classList.remove('paused'));
  document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) track.classList.remove('paused'); });
  setInterval(()=> track.classList.remove('paused'), 30000); // Safety auto-resume
})();
</script>

</body>
</html>