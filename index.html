<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>hohl.rocks — Wolf Hohl · KI‑Manager</title>

  <style>
    html,body{height:100%;margin:0;background:#0a1118;color:#eaf2ff;font:500 16px/1.45 ui-sans-serif,system-ui}
    .stage{position:fixed;inset:0;overflow:hidden}
    #bg-video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(1) contrast(1.05)}
    #shape-layer{position:absolute;inset:0;pointer-events:auto}

    /* Chatdock (wird ausgeblendet; Ticker übernimmt die Eingabe) */
    .chat-dock{position:fixed;right:22px;bottom:22px;z-index:40;background:rgba(12,16,22,.72);
      border:1px solid rgba(255,255,255,.14);backdrop-filter:blur(10px);padding:10px;border-radius:18px;display:flex;gap:8px;align-items:center}
    .chat-dock input{width:min(48vw,360px);max-width:68vw;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.16);
      color:#eaf2ff;border-radius:999px;padding:10px 14px;outline:none}
    .chat-dock button{background:#1b66ff;border:0;color:#fff;border-radius:999px;padding:9px 12px;cursor:pointer}
    .chat-dock .ghost{background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.18);color:#eaf2ff}

    /* Chat-Ausgabe (Spotlight zeigt die Antwort; Chat-Pane bleibt versteckt) */
    #chat-output{position:fixed;right:22px;bottom:92px;width:min(640px,88vw);max-height:min(58vh,460px);overflow:auto;
      background:rgba(12,16,22,.62);border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(10px);border-radius:18px;padding:12px;display:none;z-index:42}
    #chat-output.show{display:block}

    /* globales Ausblenden für Spotlight-Modus */
    .chat-dock{ display:none !important; }
    #chat-output{ display:none !important; }

    /* --- Ticker sichtbar über Shapes halten --- */
    .ticker-wrap{ z-index: 1200 !important; }   /* Shapes gehen bis ~1000 */

    .privacy-slot{position:fixed;left:14px;bottom:14px;z-index:34}
  </style>

  <!-- Neon-Shapes Styles -->
  <link rel="stylesheet" href="/hero-shapes.css?v=sp2">
</head>
<body>
  <!-- Bühne -->
  <main class="stage" aria-label="Highway-Video mit organischen Neon-Shapes">
    <video id="bg-video" autoplay playsinline loop muted>
      <source src="/videos/desert_drive.mp4" type="video/mp4" />
    </video>
    <div id="shape-layer"></div>
  </main>

  <!-- (ausgeblendet) Chat-Ausgabe & Dock, nur für Kompatibilität vorhanden -->
  <div id="chat-output" aria-live="polite"></div>
  <div class="chat-dock" hidden>
    <input id="chat-input" type="text" placeholder="Frage stellen… (KI, EU)" />
    <button id="photo-btn" class="ghost" title="Foto nutzen">Foto</button>
    <button id="chat-send">Senden</button>
  </div>

  <div class="privacy-slot" id="privacy-slot"></div>

  <!-- Globale Konfiguration -->
  <script>
    window.HOHLROCKS_CHAT_BASE = 'https://hohlrocks-production.up.railway.app';
    window.WOLF_SYSTEM_PROMPT = [
      "Du antwortest im Namen von Wolf Hohl – TÜV-zertifizierter KI-Manager.",
      "Ton: seriös, prägnant, deutsch, winter-klar, freundlich.",
      "Erstantwort maximal 3 Sätze. Wo sinnvoll: 1 kurzes Beispiel, 1 pragmatischer nächster Schritt.",
      "Beziehe dich – wenn passend – auf Wolfs Erfahrung (30 Jahre Marketing/Kommunikation, Trailer, >50 Mio Umsatz) und Rolle als KI-Manager.",
      "Keine Buzzword-Orgel. Falls unsicher: kurz Risiko/Trade-off erwähnen."
    ].join(" ");
    // Spotlight-Rendering aktivieren
    window.__ANSWER_MODE = 'spotlight';
  </script>

  <!-- Scripts: Shapes, Ticker, Spotlight, Demos -->
  <script src="/js/hero-shapes.js?v=sp2"></script>
  <script src="/js/analytics-lite.js?v=1"></script>

  <!-- Reihenfolge wichtig: Ticker-Items vor Ticker -->
  <script src="/js/ticker-items.js?v=usable1"></script>
  <!-- Ticker: aktualisierte Version mit Safe-Zone-Fix und Clamp (Cache‑Bust: loop7) -->
  <script src="/js/ticker.js?v=loop8"></script>

  <!-- Antwort-Overlay -->
  <script src="/js/answers-spotlight.js?v=1"></script>

  <!-- Micro-Demos & Foto-Flows (Style-Switcher entfernt) -->
  <script src="/js/micro-demos.js?v=1"></script>
  <script src="/js/photo-flows.js?v=1"></script>

  <!-- Ambient-Melodie (Objekt: window.WolfMelody) + Autostart nach erster Geste -->
  <script src="/js/ambient-melody.js?v=1"></script>
  <script src="/js/ambient-melody-autostart.js?v=1"></script>

  <!-- Chat/SSE: gefixte Version (v=chat7 cache bust) -->
  <script src="/js/chatbox-stream.js?v=chat8"></script>

  <!-- Notfall: Ticker sichtbar & funktionsfähig erzwingen -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // Minimale Verzögerung, dann sicherstellen, dass der Ticker läuft
      setTimeout(()=>{ try{ window.Ticker?.resume?.(); }catch(e){} }, 200);

      // Wenn aus irgendeinem Grund keine Chips gerendert wurden: rebuild
      setTimeout(()=>{
        const track = document.querySelector('.ticker-track');
        const ok = track && track.querySelectorAll('a').length>0;
        if (!ok){
          try{ window.Ticker?.rebuild?.(); }catch(e){}
        }
      }, 1200);
    });
  </script>
</body>
</html>
