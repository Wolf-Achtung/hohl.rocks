/*
  Hauptstylesheet für die „Evolve“-Version der Website.
  Dieses Design setzt auf eine kühle Farbpalette mit gelegentlichen
  Neonakzenten, organisch schwebenden Formen und einer innovativen
  Navigation. Die Animationszeiten sind bewusst lang gewählt, um
  einen ruhigen, meditativen Eindruck zu vermitteln – vergleichbar
  mit Quallen, die durch das Meer gleiten.
*/

/* Grundlegende Layout-Reset */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  width: 100%;
  font-family: 'Manrope', sans-serif;
  line-height: 1.6;
  color: #fff;
  background: #0a1522;
  /* Prevent page from scrolling vertically; all interactions occur within overlays */
  overflow: hidden;
}

/* Farbpalette */
:root {
  --color-blue: #0d3b66;
  --color-petrol: #105a7a;
  --color-purple: #5d3fd3;
  --color-neon: #39ff14;
  --color-dark: #051423;
  --color-light-overlay: rgba(0, 0, 0, 0.5);
  --text-color: #f1f5f9;
  --button-bg: linear-gradient(135deg, var(--color-blue), var(--color-purple));
  --button-hover: linear-gradient(135deg, var(--color-purple), var(--color-neon));
  --card-bg: rgba(255, 255, 255, 0.1);
  --card-border: rgba(255, 255, 255, 0.3);
}

/* Buttons */
.btn {
  display: inline-block;
  padding: 0.75em 1.5em;
  margin-top: 1em;
  font-size: 1rem;
  font-weight: 600;
  border: none;
  cursor: pointer;
  border-radius: 3rem;
  text-decoration: none;
  transition: background 0.6s ease, transform 0.3s ease;
}

.primary-btn {
  background: var(--button-bg);
  color: #fff;
  box-shadow: 0 0 10px rgba(57, 255, 20, 0.3);
}
.primary-btn:hover {
  background: var(--button-hover);
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(57, 255, 20, 0.6);
}

.ghost-btn {
  background: transparent;
  border: 2px solid var(--color-neon);
  color: var(--color-neon);
}

.ghost-btn:hover {
  background: var(--color-neon);
  color: #051423;
}

/* Hero Section */
.hero {
  position: relative;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  overflow: hidden;
}

.hero-video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
  pointer-events: none;
}

.hero-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--color-light-overlay);
  z-index: 1;
}

/* Floating shapes container: covers the hero section */
#shape-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
  overflow: visible;
}

/* Generic styling for organic shapes */
.shape {
  position: absolute;
  width: 20vmin;
  height: 20vmin;
  background: var(--color-blue);
  /* Hidden by default; shapes will fade in via JavaScript */
  opacity: 0;
  border-radius: 50% / 60%;
  mix-blend-mode: screen;
  pointer-events: auto;
  /*
    The shapes drift and change slowly to evoke a meditative jellyfish‑like motion.
    Transforms now take 20s, opacity transitions take 3s, and colours shift over
    20s for more fluid morphing.
  */
  transition: transform 20s linear, opacity 3s ease, background-color 20s linear;
  will-change: transform, opacity, background-color;
}

/* Hover effect: lighten and glow */
.shape:hover {
  filter: brightness(170%) saturate(200%);
  box-shadow: 0 0 50px rgba(57, 255, 20, 0.7);
}

/* Expanded bubble styling: when a shape is clicked, it enlarges into a
   dialogue bubble that contains interactive content. The expanded bubble
   floats in the centre of the viewport, overlays other shapes and
   provides its own close button and scrollable content area. */
.shape.expanded {
  position: absolute;
  width: 60vmin;
  height: 60vmin;
  top: 50vh;
  left: 50vw;
  transform: translate(-50%, -50%);
  background: rgba(10, 20, 40, 0.95);
  mix-blend-mode: normal;
  border-radius: 25% 35% 30% 40% / 35% 30% 40% 25%;
  padding: 1.5rem;
  overflow: hidden;
  box-shadow: 0 0 40px rgba(57, 255, 20, 0.5);
  transition: width 0.6s ease, height 0.6s ease, top 0.6s ease, left 0.6s ease, transform 0.6s ease;
  /* Pulse effect on the neon glow */
  animation: pulseShadow 8s ease-in-out infinite;
}

/* Keyframes for the pulsing neon glow */
@keyframes pulseShadow {
  0% {
    box-shadow: 0 0 30px rgba(57, 255, 20, 0.3);
  }
  50% {
    box-shadow: 0 0 60px rgba(57, 255, 20, 0.8);
  }
  100% {
    box-shadow: 0 0 30px rgba(57, 255, 20, 0.3);
  }
}

/* Style headings and paragraphs inside expanded bubbles */
.shape.expanded .bubble-content h3 {
  font-size: 1.6rem;
  margin-bottom: 1rem;
  color: var(--color-neon);
  text-align: center;
}
.shape.expanded .bubble-content p {
  font-size: 0.95rem;
  margin-bottom: 0.8rem;
  color: var(--text-color);
  text-align: center;
}
.shape.expanded .bubble-content form {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  width: 100%;
}
.shape.expanded .bubble-content label {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  font-size: 0.9rem;
  color: var(--text-color);
}
.shape.expanded .bubble-content input[type="radio"] {
  accent-color: var(--color-neon);
}
.shape.expanded .bubble-content .btn {
  align-self: center;
  margin-top: 0.5rem;
}
.shape.expanded .bubble-content .chat-note {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.6);
  text-align: center;
  margin-top: 0.5rem;
}

.shape.expanded .close-bubble {
  position: absolute;
  top: 0.5rem;
  right: 0.8rem;
  background: none;
  border: none;
  font-size: 2rem;
  color: var(--color-neon);
  cursor: pointer;
  z-index: 2;
}

.shape.expanded .bubble-content {
  position: relative;
  width: 100%;
  height: calc(100% - 3rem);
  overflow-y: auto;
  margin-top: 1.5rem;
  color: var(--text-color);
}

.shape.expanded .bubble-content input,
.shape.expanded .bubble-content textarea,
.shape.expanded .bubble-content button {
  width: 100%;
}

/* Floating chat widget that drifts across the hero. It remains visible at all times and
   can be clicked to pause movement and enter a question. */
.floating-chat {
  position: absolute;
  top: 60vh;
  left: 60vw;
  width: 30vmin;
  max-width: 300px;
  /* Glassmorphism effect similar to overlay chat */
  background: rgba(10, 20, 40, 0.6);
  border: 1px solid rgba(57, 255, 20, 0.3);
  border-radius: 1.5rem;
  box-shadow: 0 0 20px rgba(57, 255, 20, 0.4);
  padding: 1rem;
  backdrop-filter: blur(6px);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  z-index: 3;
  pointer-events: auto;
  color: var(--text-color);
  transition: top 15s linear, left 15s linear;
}
.floating-chat-form {
  display: flex;
  gap: 0.3rem;
  width: 100%;
}
.floating-chat-form input {
  flex: 1;
  background: rgba(10, 20, 40, 0.6);
  border: 1px solid rgba(57, 255, 20, 0.3);
  border-radius: 0.5rem;
  color: var(--text-color);
  padding: 0.5rem 0.7rem;
  font-size: 1rem;
  outline: none;
}
.floating-chat-form button {
  background: var(--button-bg);
  color: #fff;
  border: none;
  padding: 0.5rem 0.9rem;
  border-radius: 1.2rem;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.4s ease, transform 0.3s ease;
}
.floating-chat-form button:hover {
  background: var(--button-hover);
  transform: scale(1.05);
}
.floating-chat-messages {
  max-height: 20vh;
  overflow-y: auto;
  font-size: 0.85rem;
  line-height: 1.3;
}
.floating-chat-messages .message {
  margin-bottom: 0.5rem;
}
.floating-chat-messages .message.user {
  color: var(--color-purple);
  text-align: right;
}
.floating-chat-messages .message.bot {
  color: var(--color-neon);
  text-align: left;
}

/* Generic float up and down for subtle vertical motion */
@keyframes floatUpDown {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-20px); }
}

/* Hero content styling */
.hero-content {
  position: relative;
  z-index: 3;
  max-width: 800px;
  padding: 1rem;
}

.hero-content h1 {
  font-size: 3rem;
  line-height: 1.2;
  margin-bottom: 0.2em;
  font-weight: 700;
  color: var(--color-neon);
  text-shadow: 0 0 10px rgba(57, 255, 20, 0.8);
}
.hero-content h2 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
  color: #a3b1e7;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-shadow: 0 0 6px rgba(163, 177, 231, 0.8);
}
.hero-content p {
  font-size: 1rem;
  margin-bottom: 1.5rem;
  color: var(--text-color);
}

/* Sections */
.section {
  padding: 5rem 2rem;
  position: relative;
  z-index: 1;
  background: var(--color-dark);
}
.section h3 {
  font-size: 2rem;
  margin-bottom: 1rem;
  color: var(--color-neon);
}
.section p {
  max-width: 800px;
  margin: 0 auto 2rem;
  color: var(--text-color);
  font-size: 1rem;
}

/* Projects grid */
.projects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
  max-width: 1000px;
  margin: 0 auto;
}
.project-card {
  background: var(--card-bg);
  border: 2px solid var(--card-border);
  border-radius: 1rem;
  padding: 2rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
  transition: transform 0.5s ease, box-shadow 0.5s ease;
  position: relative;
}
.project-card h4 {
  font-size: 1.25rem;
  margin-bottom: 0.5rem;
  color: var(--color-purple);
}
.project-card p {
  font-size: 0.9rem;
  margin-bottom: 1rem;
  color: var(--text-color);
}
.project-card:hover {
  transform: translateY(-10px) rotate(-1deg);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
}

/* Contact form */
.contact-section form {
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.contact-section input,
.contact-section textarea {
  padding: 0.75em 1em;
  border: none;
  border-radius: 0.5rem;
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  font-size: 1rem;
  outline: none;
}

/* Ensure inputs and textarea fill the available width inside the info overlay */
.info-container input,
.info-container textarea {
  width: 100%;
}
.contact-section input::placeholder,
.contact-section textarea::placeholder {
  color: rgba(255, 255, 255, 0.6);
}
.contact-section button {
  align-self: flex-start;
}

/* Footer */
.footer {
  padding: 2rem;
  text-align: center;
  background: var(--color-dark);
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.8rem;
}

/* Navigation overlay */
#menu-button {
  position: fixed;
  top: 1.5rem;
  right: 1.5rem;
  z-index: 4;
  background: transparent;
  border: none;
  color: var(--color-neon);
  font-size: 2rem;
  cursor: pointer;
  mix-blend-mode: difference;
}

#menu-button:hover {
  transform: scale(1.2);
}

/* Navigation overlay: hidden via clip-path; expands from the menu button (top right) when opened */
.nav-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: rgba(3, 10, 23, 0.96);
  clip-path: circle(0% at calc(100% - 1.5rem) 1.5rem);
  transition: clip-path 0.8s ease-in-out, opacity 0.5s ease;
  z-index: 5;
  opacity: 0;
  pointer-events: none;
}
.nav-overlay.open {
  clip-path: circle(150% at calc(100% - 1.5rem) 1.5rem);
  opacity: 1;
  pointer-events: auto;
}

.nav-overlay ul {
  list-style: none;
  text-align: center;
}
.nav-overlay li {
  margin: 1.5rem 0;
}
.nav-overlay a {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 2rem;
  color: var(--color-neon);
  text-decoration: none;
  position: relative;
  display: inline-block;
  padding: 0.2em 0.4em;
  /* glitch style via multiple shadows */
  text-shadow: 2px 0 var(--color-purple), -2px 0 var(--color-petrol);
  transition: color 0.3s ease;
  /* subtle glitch animation */
  animation: glitch 2.5s infinite linear;
}
.nav-overlay a:hover {
  color: var(--color-purple);
  text-shadow: -2px 0 var(--color-blue), 2px 0 var(--color-neon);
}

#close-nav {
  position: absolute;
  top: 1rem;
  right: 1rem;
  font-size: 2rem;
  background: transparent;
  color: var(--color-neon);
  border: none;
  cursor: pointer;
}
#close-nav:hover {
  transform: rotate(90deg);
}

/* Information overlay: hidden by default, covers entire viewport */
.info-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(3, 10, 23, 0.9);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 6;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease;
}
.info-overlay.open {
  opacity: 1;
  pointer-events: auto;
}

/* Container for the revealed content: irregular shape with neon border */
.info-container {
  position: relative;
  width: 85vw;
  max-width: 800px;
  /* Slightly lighter background for better contrast */
  background: rgba(10, 20, 40, 0.85);
  /* Remove the static border; the animated ring provides the outline */
  border: none;
  border-radius: 50% / 60%;
  padding: 2rem;
  box-sizing: border-box;
  color: var(--text-color);
  box-shadow: 0 0 30px rgba(57, 255, 20, 0.4);
  overflow-y: auto;
  /* Prevent horizontal scrollbars from appearing due to neon ring offsets */
  overflow-x: hidden;
  max-height: 80vh;
}

/* SVG ring surrounding info container */
.ring-svg {
  position: absolute;
  top: -4px;
  left: -4px;
  width: calc(100% + 8px);
  height: calc(100% + 8px);
  color: var(--color-neon);
  pointer-events: none;
  stroke-dasharray: 600;
  stroke-dashoffset: 600;
}

/* Animate the ring drawing when the overlay becomes visible */
.info-overlay.open .ring-svg {
  animation: drawRing 1.5s ease-out forwards;
}

@keyframes drawRing {
  to {
    stroke-dashoffset: 0;
  }
}

.info-container h3 {
  color: var(--color-neon);
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 1.8rem;
}
.info-container p {
  font-size: 1rem;
  margin-bottom: 1rem;
}
.info-container .projects-grid {
  grid-template-columns: 1fr;
}

/* Chatbot styles */
.chat-window {
  /* Glassmorphism effect for chat window */
  background: rgba(10, 20, 40, 0.5);
  border: 1px solid rgba(57, 255, 20, 0.2);
  border-radius: 1rem;
  padding: 1.2rem;
  max-height: 40vh;
  overflow-y: auto;
  margin-bottom: 1rem;
  backdrop-filter: blur(6px);
}
.message {
  margin-bottom: 0.8rem;
  padding: 0.8rem 1rem;
  border-radius: 0.75rem;
  max-width: 85%;
  font-size: 0.95rem;
  line-height: 1.5;
}
.message.user {
  background: rgba(57, 255, 20, 0.15);
  border: 1px solid rgba(57, 255, 20, 0.4);
  align-self: flex-end;
  margin-left: auto;
}
.message.bot {
  background: rgba(100, 130, 210, 0.15);
  border: 1px solid rgba(100, 130, 210, 0.4);
  color: var(--text-color);
}
.chat-note {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.6);
  margin-top: 0.5rem;
}

/* Styling for chat overlay form */
#chat-form {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}
#chat-form input {
  background: rgba(10, 20, 40, 0.6);
  border: 1px solid rgba(57, 255, 20, 0.3);
  border-radius: 0.5rem;
  padding: 0.7rem 1rem;
  color: var(--text-color);
  font-size: 1rem;
  width: 100%;
}
#chat-form button {
  background: var(--button-bg);
  border: none;
  border-radius: 2rem;
  color: #fff;
  padding: 0.7rem 1.5rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.4s ease, transform 0.3s ease;
}
#chat-form button:hover {
  background: var(--button-hover);
  transform: scale(1.05);
}

/* Risk check result */
.risk-result {
  margin-top: 1rem;
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-neon);
}

/* Fact display */
.fact-display {
  background: rgba(255, 255, 255, 0.05);
  padding: 1rem;
  border-radius: 0.75rem;
  margin-bottom: 1rem;
  font-size: 1rem;
  line-height: 1.4;
}

/* Close button for info overlay */
#close-info {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  font-size: 2rem;
  background: transparent;
  color: var(--color-neon);
  border: none;
  cursor: pointer;
  transition: transform 0.3s ease;
}
#close-info:hover {
  transform: rotate(180deg);
}

/* Glitch keyframes for nav text */
@keyframes glitch {
  0% {
    transform: translate(0, 0);
    clip-path: inset(0 0 0 0);
  }
  10% {
    transform: translate(-2px, 2px);
    clip-path: inset(15% 0 5% 0);
  }
  20% {
    transform: translate(3px, -3px);
    clip-path: inset(0 10% 10% 0);
  }
  30% {
    transform: translate(-4px, 4px);
    clip-path: inset(10% 5% 0 5%);
  }
  40% {
    transform: translate(2px, -2px);
    clip-path: inset(5% 15% 15% 0);
  }
  50% {
    transform: translate(0, 0);
    clip-path: inset(0 0 0 0);
  }
  100% {
    transform: translate(0, 0);
    clip-path: inset(0 0 0 0);
  }
}

/* Fade-in effects for sections */
.fade-in {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}
.fade-in.show {
  opacity: 1;
  transform: translateY(0);
}

@media (max-width: 768px) {
  .hero-content h1 {
    font-size: 2.2rem;
  }
  .hero-content h2 {
    font-size: 1.1rem;
  }
  #menu-button {
    font-size: 1.8rem;
  }
  .nav-overlay a {
    font-size: 1.6rem;
  }
}